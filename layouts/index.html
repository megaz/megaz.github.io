<!doctype html>
<html lang="en">
  {{ partial "head.html" . }}
<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
    <div class="content">
      {{ partial "header.html" . }}
      {{ .Content }}
      {{ if gt (len ( where .Site.RegularPages "Section" "posts" )) 0 }}
      <section class="latest-posts">
        <h1 class="section-title">Latest Posts</h1>
        <div class="posts-grid">
          {{ range (first .Site.Params.items (where .Site.RegularPages "Section" "posts" ).ByDate.Reverse) }}
            {{ $readingTime := math.Round (div (countwords .Content) 200.0) }}
            {{ if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}
            <article class="post-card">
              <div class="post-content">
                <div class="post-meta">
                  <time class="post-date" datetime="{{ dateFormat "2006-01-02" .Date }}">{{ dateFormat "Jan 2, 2006" .Date }}</time>
                  <span class="reading-time">{{ $readingTime }} min read</span>
                </div>
                
                <h2 class="post-title">
                  <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                </h2>
                
                <p class="post-excerpt">{{ if eq .Title "The Migration That Cut Our UN Data Pipeline Time by 87%" }}How we achieved up to 29x speedups and 50% memory reduction in our UN data processing pipeline.{{ else }}{{ .Summary | default (.Plain | truncate 150) }}{{ end }}</p>
                
                {{ if .Params.tags }}
                <div class="post-tags">
                  {{ range first 3 .Params.tags }}
                    <span class="tag">{{ . }}</span>
                  {{ end }}
                </div>
                {{ end }}
              </div>
            </article>
          {{ end }}
        </div>
      </section>
      {{ end }}
    </div>
  </main>
</body>
</html>
